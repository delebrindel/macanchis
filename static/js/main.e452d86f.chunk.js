(this.webpackJsonpmacanchis=this.webpackJsonpmacanchis||[]).push([[0],[,,,function(e,t,n){e.exports={control:"Checkout_control__CLiFO",invalid:"Checkout_invalid__MTGHN",cancel:"Checkout_cancel__37LD7",confirmation:"Checkout_confirmation__qVOYY",errorMessage:"Checkout_errorMessage__1gTyh"}},,function(e,t,n){e.exports={cart__list:"Cart_cart__list__2BhqE",cart__total:"Cart_cart__total__3r70x",cart__actions:"Cart_cart__actions__2yAvH",cancel:"Cart_cancel__3lnc-",confirmation:"Cart_confirmation__3OZrd",orderSent:"Cart_orderSent__1g3jG"}},,,function(e,t,n){e.exports={cart__item:"CartItem_cart__item__1-FSB",cart__item__summary:"CartItem_cart__item__summary__2AX9G",cart__item__actions:"CartItem_cart__item__actions__18S7D"}},,function(e,t,n){e.exports={navbar__cart:"CartButton_navbar__cart__4HHVQ","navbar__cart--bump":"CartButton_navbar__cart--bump__3Djt0","jello-horizontal":"CartButton_jello-horizontal__FN7lw",navbar__cart__icon:"CartButton_navbar__cart__icon__xkmXw",navbar__cart__badge:"CartButton_navbar__cart__badge__3ygXB"}},function(e,t,n){e.exports={"meals-list__item":"MealItem_meals-list__item__ZDZma","meals-list__item__text":"MealItem_meals-list__item__text__5XlgN","meals-list__item__description":"MealItem_meals-list__item__description__1-YEe","meals-list__item__price":"MealItem_meals-list__item__price__3aw4a"}},,,function(e,t,n){e.exports={"meals-list__item__form":"MealItemForm_meals-list__item__form__wSAQt","error-message":"MealItemForm_error-message__2HhFm"}},function(e,t,n){e.exports={backdrop:"Modal_backdrop__2bvjC",modal:"Modal_modal__2KoQd"}},,,function(e,t,n){e.exports={"navbar-wrapper":"Navbar_navbar-wrapper__1wC5I"}},function(e,t,n){e.exports={cardWrapper:"Card_cardWrapper__3Apya"}},function(e,t,n){e.exports={"intro-wrapper":"Intro_intro-wrapper__3vfF3"}},function(e,t,n){e.exports={"form-control":"Input_form-control__RpLS4"}},function(e,t,n){e.exports={"meal-selector":"Meals_meal-selector__3dKaO"}},function(e,t,n){e.exports={footer:"Footer_footer__2Fuhv"}},,,,,function(e,t,n){},,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(6),o=n.n(r),s=(n(28),n(2)),i=n(18),l=n.n(i),u={items:[],totalAmount:0,addItem:function(e){},removeItem:function(e){},resetCart:function(){}},m=c.a.createContext(u),d=n(10),j=n.n(d),_=n(0),b=function(){return Object(_.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(_.jsx)("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})})},h=function(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],r=n[1],o=Object(a.useContext)(m),i=o.items.reduce((function(e,t){return e+t.amount}),0),l="".concat(j.a.navbar__cart," ").concat(c?j.a["navbar__cart--bump"]:""),u=o.items;return Object(a.useEffect)((function(){if(u.length>0){r(!0);var e=setTimeout((function(){r(!1)}),900);return function(){clearTimeout(e)}}}),[u]),Object(_.jsxs)("button",{className:l,onClick:e.toggleModal,children:[Object(_.jsx)("span",{className:j.a.navbar__cart__icon,children:Object(_.jsx)(b,{})}),Object(_.jsx)("span",{className:j.a.navbar__cart__badge,children:i})]})},O=function(e){return Object(_.jsxs)("nav",{className:l.a["navbar-wrapper"],children:[Object(_.jsx)("h1",{children:"Macanchis"}),Object(_.jsx)(h,{toggleModal:e.toggleModal,children:"Cart"})]})},f=n(19),x=n.n(f),p=function(e){return Object(_.jsx)("div",{className:x.a.cardWrapper+(e.className?" ".concat(e.className):""),children:e.children})},g=n(20),v=n.n(g),C=function(){return Object(_.jsxs)(p,{className:v.a["intro-wrapper"],children:[Object(_.jsx)("h2",{children:"Delicious Food, Delivered to you"}),Object(_.jsx)("p",{children:"Choose your favourite meal from our broad selection of available meals and enjoy a delicious lunch or dinner at home"}),Object(_.jsx)("p",{children:"All our meals are cooked with high-quality ingredients, just-in-time and of course by experienced chefs!"})]})},N=n(7),y=n.n(N),M=n(13),w=n(11),S=n.n(w),A=n(14),F=n.n(A),I=n(4),k=n(21),H=n.n(k),L=c.a.forwardRef((function(e,t){return Object(_.jsxs)("div",{className:H.a["form-control"],children:[Object(_.jsx)("label",{htmlFor:e.input.id,children:e.label}),Object(_.jsx)("input",Object(I.a)({ref:t},e.input))]})})),T=function(e){var t=Object(a.useRef)(),n=Object(a.useState)(!0),c=Object(s.a)(n,2),r=c[0],o=c[1];return Object(_.jsxs)("form",{className:F.a["meals-list__item__form"],onSubmit:function(n){n.preventDefault();var a=t.current.value,c=+a;0===a.trim().length||c<=0?o(!1):(t.current.value=0,e.onAddToCart(c))},children:[Object(_.jsx)(L,{ref:t,label:"Amount",input:{type:"number",defaultValue:0,min:0,id:"amount",step:1}}),Object(_.jsx)("button",{className:F.a["meals-list__item__button"],children:"Add"}),!r&&Object(_.jsx)("p",{className:F.a["error-message"],children:"Please enter a valid value"})]})},B=function(e){var t=Object(a.useContext)(m),n="$ ".concat(e.price.toFixed(2));return Object(_.jsxs)("li",{className:S.a["meals-list__item"],children:[Object(_.jsxs)("div",{className:S.a["meals-list__item__text"],children:[Object(_.jsx)("h3",{children:e.name}),Object(_.jsx)("div",{className:S.a["meals-list__item__description"],children:e.description}),Object(_.jsx)("div",{className:S.a["meals-list__item__price"],children:n})]}),Object(_.jsx)(T,{onAddToCart:function(n){t.addItem({id:e.id,name:e.name,amount:n,price:e.price})}})]})},E=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!0),o=Object(s.a)(r,2),i=o[0],l=o[1],u=Object(a.useState)(""),m=Object(s.a)(u,2),d=m[0],j=m[1];Object(a.useEffect)((function(){(function(){var e=Object(M.a)(y.a.mark((function e(){var t,n,a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(""),e.next=3,fetch("https://macanchis-990a2-default-rtdb.firebaseio.com/meals.json");case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Something went wrong while fetching data from firebase");case 6:return e.next=8,t.json();case 8:for(r in n=e.sent,a=[],n)a.push({id:r,name:n[r].name,description:n[r].description,price:n[r].price});c(a),l(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().catch((function(e){l(!1),j(e.message)}))}),[]);var b=n&&n.map((function(e){return Object(_.jsx)(B,{id:e.id,name:e.name,description:e.description,price:e.price},e.id)}));return Object(_.jsxs)("section",{children:[i&&"Loading...",!i&&""!==d&&d,Object(_.jsx)("ul",{children:!i&&""===d&&b})]})},R=n(22),D=n.n(R),P=function(){return Object(_.jsx)(p,{className:D.a["meal-selector"],children:Object(_.jsx)(E,{})})},Y=n(8),$=n.n(Y),z=function(e){var t="$ ".concat(e.price.toFixed(2));return Object(_.jsx)("li",{className:$.a.cart__item,children:Object(_.jsxs)("div",{children:[Object(_.jsx)("h2",{children:e.name}),Object(_.jsxs)("div",{className:$.a.cart__item__summary,children:[Object(_.jsx)("span",{className:$.a["cart__item__summary-amount"],children:e.amount}),Object(_.jsx)("span",{style:{marginLeft:"1rem",marginRight:"1rem"},children:"\xd7"}),Object(_.jsx)("span",{className:$.a["cart__item__summary-price"],children:t}),Object(_.jsx)("span",{children:" = "}),Object(_.jsx)("span",{children:"$ ".concat((e.price*e.amount).toFixed(2))})]}),Object(_.jsxs)("div",{className:$.a.cart__item__actions,children:[Object(_.jsx)("button",{onClick:e.onRemove,children:"-"}),Object(_.jsx)("button",{onClick:e.onAdd,children:"+"})]})]})})},G=n(5),V=n.n(G),W=n(15),X=n.n(W),q=function(e){return Object(_.jsx)("div",{onClick:e.toggleModal,className:X.a.backdrop})},J=function(e){return Object(_.jsx)("div",{className:X.a.modal,children:Object(_.jsx)("div",{className:X.a.modal__content,children:e.children})})},Q=document.getElementById("overlays"),Z=function(e){return Object(_.jsxs)(a.Fragment,{children:[o.a.createPortal(Object(_.jsx)(q,{toggleModal:e.toggleModal}),Q),o.a.createPortal(Object(_.jsx)(J,{children:e.children}),Q)]})},K=1,U=function(e){var t=Object(a.useState)(""),n=Object(s.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)(!1),i=Object(s.a)(o,2),l=i[0],u=i[1],m=Object(a.useState)([]),d=Object(s.a)(m,2),j=d[0],_=d[1],b=Object(a.useState)(!1),h=Object(s.a)(b,2),O=h[0],f=h[1],x=function(t){var n=[];return l&&e.minLength&&t.trim().length<e.minLength&&n.push({errorType:K,errorMsg:"Field can not be less than ".concat(e.minLength," characters long.")}),n};return{value:c,errors:j,changeHandler:function(t){u(!0);var n=[],a=t.target.value,c=(n=x(a)).map((function(e){return e.errorMsg}));a.trim().length<=e.maxLength&&r(a),f(0===n.length&&l),_(c)},blurHandler:function(e){u(!0);var t=[],n=e.target.value,a=(t=x(n)).map((function(e){return e.errorMsg}));f(0===t.length&&l),_(a)},valid:O,touched:l,reset:function(){r(""),_([]),f(!1),u(!1)}}},ee=n(3),te=n.n(ee),ne=function(e){var t=e.onCancel,n=e.onConfirm,c=U({minLength:3,maxLength:20}),r=c.value,o=c.errors,i=c.changeHandler,l=c.blurHandler,u=c.reset,m=c.valid,d=c.touched,j=U({minLength:3,maxLength:50}),b=j.value,h=j.errors,O=j.changeHandler,f=j.blurHandler,x=j.reset,p=j.valid,g=j.touched,v=U({minLength:5,maxLength:6}),C=v.value,N=v.errors,y=v.changeHandler,M=v.blurHandler,w=v.reset,S=v.valid,A=v.touched,F=U({minLength:3,maxLength:30}),I=F.value,k=F.errors,H=F.changeHandler,L=F.blurHandler,T=F.reset,B=F.valid,E=F.touched,R=Object(a.useState)(!1),D=Object(s.a)(R,2),P=D[0],Y=D[1],$=m&&p&&S&&B,z=function(e){e.preventDefault(),$&&(u(),x(),w(),T(),n({name:r,street:b,postalCode:C,city:I}))};return Object(a.useEffect)((function(){Y($)}),[$]),Object(_.jsxs)("form",{action:"#",onSubmit:z,children:[Object(_.jsxs)("div",{className:"".concat(te.a.control," ").concat(m||!d?"":te.a.invalid),children:[Object(_.jsx)("label",{htmlFor:"customerName",children:"Your Name"}),Object(_.jsx)("input",{type:"text",name:"customerName",value:r,onChange:i,onBlur:l}),o.map((function(e){return Object(_.jsx)("span",{className:te.a.errorMessage,children:e},Math.random())}))]}),Object(_.jsxs)("div",{className:"".concat(te.a.control," ").concat(p||!g?"":te.a.invalid),children:[Object(_.jsx)("label",{htmlFor:"street",children:"Address"}),Object(_.jsx)("input",{type:"text",name:"street",value:b,onChange:O,onBlur:f}),h.map((function(e){return Object(_.jsx)("span",{className:te.a.errorMessage,children:e},Math.random())}))]}),Object(_.jsxs)("div",{className:"".concat(te.a.control," ").concat(S||!A?"":te.a.invalid),children:[Object(_.jsx)("label",{htmlFor:"postCode",children:"Postal Code"}),Object(_.jsx)("input",{type:"text",name:"postCode",value:C,onChange:y,onBlur:M}),N.map((function(e){return Object(_.jsx)("span",{className:te.a.errorMessage,children:e},Math.random())}))]}),Object(_.jsxs)("div",{className:"".concat(te.a.control," ").concat(B||!E?"":te.a.invalid),children:[Object(_.jsx)("label",{htmlFor:"city",children:"City"}),Object(_.jsx)("input",{type:"text",name:"city",value:I,onChange:H,onBlur:L}),k.map((function(e){return Object(_.jsx)("span",{className:te.a.errorMessage,children:e},Math.random())}))]}),Object(_.jsx)("button",{disabled:!P,type:"submit",className:te.a.confirmation,onClick:z,children:"Confirm My Order"}),Object(_.jsx)("button",{type:"button",onClick:t,className:te.a.cancel,children:"Cancel"})]})},ae=function(e){var t=e.toggleModal,n=Object(a.useContext)(m),c=function(e){n.removeItem(e)},r=function(e){n.addItem(Object(I.a)(Object(I.a)({},e),{},{amount:1}))},o=function(){var e=Object(M.a)(y.a.mark((function e(t){var a,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),console.log(t),console.log("======================="),console.log("Order is being handled!"),console.log("======================="),console.log("Username: ".concat(t.name)),console.log("Address: ".concat(t.street)),console.log("City: ".concat(t.city)),console.log("Postal Code: ".concat(t.postalCode)),console.log("======================="),n.items.forEach((function(e){console.log("Ordering ".concat(e.amount," x ").concat(e.name,", $ ").concat((e.amount*e.price).toFixed(2)))})),console.log("======================="),console.log("Your total is $ ".concat(n.totalAmount.toFixed(2))),console.log("======================="),e.next=16,fetch("https://macanchis-990a2-default-rtdb.firebaseio.com/orders.json",{method:"POST",body:JSON.stringify({user:t,orderItems:n.items})});case 16:return a=e.sent,e.next=19,a.json();case 19:c=e.sent,setTimeout((function(){c&&g(!0),n.resetCart(),d(!1)}),1e3);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=Object(a.useState)(!1),l=Object(s.a)(i,2),u=l[0],d=l[1],j=Object(a.useState)(!1),b=Object(s.a)(j,2),h=b[0],O=b[1],f=Object(a.useState)(!1),x=Object(s.a)(f,2),p=x[0],g=x[1],v=n.items.map((function(e){return Object(_.jsx)(z,{price:e.price,name:e.name,amount:e.amount,onRemove:c.bind(null,e.id),onAdd:r.bind(null,e)},e.id)})),C="$ ".concat(n.totalAmount.toFixed(2)),N=Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("ul",{className:V.a.cart__list,children:v}),Object(_.jsxs)("div",{className:V.a.cart__total,children:[Object(_.jsx)("span",{children:"Total Amount: "}),Object(_.jsx)("span",{children:C})]}),h&&Object(_.jsx)(ne,{onCancel:t,onConfirm:o}),!h&&Object(_.jsxs)("div",{className:V.a.cart__actions,children:[!h&&n.items.length>0&&Object(_.jsx)("button",{className:V.a.confirmation,onClick:function(){O((function(e){return!e}))},children:"Order"}),Object(_.jsx)("button",{onClick:t,className:V.a.cancel,children:"Cancel"})]})]}),w=Object(_.jsx)("p",{className:V.a.orderSent,children:"Sending order data..."}),S=Object(_.jsxs)("div",{className:V.a.orderSent,children:[Object(_.jsx)("p",{children:"Succesfully sent your order!"}),Object(_.jsx)("p",{children:"You will be contacted soon."}),Object(_.jsx)("div",{className:V.a.cart__actions,children:Object(_.jsx)("button",{onClick:t,className:V.a.confirmation,children:"Ok"})})]});return Object(_.jsxs)(Z,{toggleModal:t,children:[!u&&!p&&N,u&&w,p&&S]})},ce=n(23),re=n.n(ce),oe=document.getElementById("footer"),se=function(){return Object(_.jsxs)("span",{className:re.a.footer,children:[Object(_.jsxs)("p",{children:["Written with <3 by ",Object(_.jsx)("a",{href:"https://gitlab.com/delebrindel",target:"git",children:"delebrindel"})]}),Object(_.jsxs)("p",{children:["Github repo ",Object(_.jsx)("a",{href:"https://github.com/delebrindel/macanchis",target:"git",children:"here"})]})]})},ie=function(e){return Object(_.jsx)(a.Fragment,{children:o.a.createPortal(Object(_.jsx)(se,{}),oe)})},le=n(17),ue={items:[],totalAmount:0},me="ADD_ITEM_TO_CART",de="REMOVE_ITEM_FROM_CART",je="RESET_CART",_e=function(e,t){switch(t.type){case me:var n,a=e.totalAmount+t.item.price*t.item.amount,c=e.items.findIndex((function(e){return e.id===t.item.id})),r=e.items[c];if(r){var o=Object(I.a)(Object(I.a)({},r),{},{amount:r.amount+t.item.amount});(n=Object(le.a)(e.items))[c]=o}else n=e.items.concat(t.item);return{items:n,totalAmount:a};case de:var s,i=e.items.findIndex((function(e){return e.id===t.id})),l=e.items[i],u=e.totalAmount-l.price;if(1===l.amount)s=e.items.filter((function(e){return e.id!==t.id}));else{var m=Object(I.a)(Object(I.a)({},l),{},{amount:l.amount-1});(s=Object(le.a)(e.items))[i]=m}return{items:s,totalAmount:u};case je:default:return ue}},be=function(e){var t=Object(a.useReducer)(_e,ue),n=Object(s.a)(t,2),c=n[0],r=n[1],o={items:c.items,totalAmount:c.totalAmount,addItem:function(e){r({type:me,item:e})},removeItem:function(e){r({type:de,id:e})},resetCart:function(){r({type:je})}};return Object(_.jsx)(m.Provider,{value:o,children:e.children})};n(31);var he=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],r=function(){c((function(e){return!e}))};return Object(_.jsxs)("div",{className:"App",children:[Object(_.jsxs)(be,{children:[Object(_.jsx)(O,{toggleModal:r}),n&&Object(_.jsx)(ae,{toggleModal:r}),Object(_.jsx)(C,{}),Object(_.jsx)(P,{})]}),Object(_.jsx)(ie,{})]})},Oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,33)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};o.a.render(Object(_.jsx)(c.a.StrictMode,{children:Object(_.jsx)(he,{})}),document.getElementById("root")),Oe()}],[[32,1,2]]]);
//# sourceMappingURL=main.e452d86f.chunk.js.map